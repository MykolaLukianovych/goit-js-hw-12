{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport axios from \"axios\";\n\n\nexport default async function getPictures(query, page = 1, perPage = 15) {\n    const BASE_URL = \"https://pixabay.com/api/\";\n    const KEY = '47394920-a4032b33a38ab12c89a369f6a';\n    \n    const params = new URLSearchParams({\n        key: KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\",\n        page,\n        per_page: perPage,\n    });\n\n    try {\n        const response = await axios(BASE_URL, { params });\n        return response.data;\n    } catch (error) {\n        iziToast.error({\n            title: \"Error\",\n            message: \"Failed to fetch images. Please try again later.\",\n            position: \"topRight\",\n        });\n        throw error;\n    } \n        \n};\n\n","export default reflectionPictures;\n\n\nfunction reflectionPictures(pictures) {\n    return pictures.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n        <a class=\"gallery-item\" href=\"${largeImageURL}\">\n        <div class=\"all-gallery\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\">\n        <div class=\"discription\">\n        <p class=\"discr-text\">Likes <span>${likes}</span></p>\n        <p class=\"discr-text\">Views <span>${views}</span></p>\n        <p class=\"discr-text\">Comments <span>${comments}</span></p>\n        <p class=\"discr-text\">Downloads <span>${downloads}</span></p>\n        </div>\n        </div>\n        </a>\n    \n    `).join(\"\");\n}\n\n","\"use strict\"\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport \"./js/pixabay-api.js\";\nimport \"./js/render-functions.js\";\nimport getPictures from \"./js/pixabay-api.js\";\nimport reflectionPictures from \"./js/render-functions.js\";\n\n\n\nconst formSearch = document.querySelector(\".search-form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loadMoreBtn = document.querySelector(\".load-btn-js\")\n\n\n\n\nlet lightbox = new SimpleLightbox(\".gallery-item\", {\n    captions: true,\n    captionSelector: \"img\",\n    captionType: \"attr\",\n    captionsData: \"alt\",\n    captionDelay: 250,\n});\n\nlet currentPage = 1;\nlet currentQuery = \"\";\n\nloadMoreBtn.style.display = \"none\";\n\n\nformSearch.addEventListener(\"submit\", handleSearch);\nloadMoreBtn.addEventListener(\"click\", handleLoadMore);\n\nasync function handleSearch(event) {\n    event.preventDefault();\n    \n\n    gallery.innerHTML = \"\";\n\n    currentQuery = event.target.elements.query.value.trim();\n    currentPage = 1;\n\n    if (currentQuery === \"\") {\n        iziToast.error({\n            title: \"No Results\",\n            message: \"Sorry, there are no images matching your search query. Please try again!\",\n            position: \"topRight\",\n        });\n        loadMoreBtn.style.display = \"none\";\n        return;\n    }\n\n\n    try {\n        const data = await getPictures(currentQuery, currentPage);\n\n            if (data.hits.length === 0) {\n                iziToast.info({\n                    title: \"No Results\",\n                    message: \"Sorry, there are no images matching your search query. Please try again!\",\n                    position: \"topRight\",\n                });\n                loadMoreBtn.style.display = \"none\";\n                return\n            } else if (currentPage * 15 >= data.totalHits) {\n                loadMoreBtn.style.display = \"none\";\n                iziToast.info({\n                title: \"End of Results\",\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\",\n                });\n                return;\n        }\n            \n            const markup = reflectionPictures(data.hits);\n            gallery.innerHTML = markup;\n\n        lightbox.refresh();\n        loadMoreBtn.style.display = \"block\";\n        } catch (error) {\n            iziToast.error({\n                title: \"Error\",\n                message: \"Something went wrong. Please try again later\",\n                position: \"topRight\"\n            });\n        } finally {\n            event.target.reset();\n        };\n}\n\nasync function handleLoadMore() {\n    currentPage += 1;\n\n    try {\n        const data = await getPictures(currentQuery, currentPage);\n\n        if (data.hits.length === 0) {\n            iziToast.info({\n                title: \"End of Results\",\n                message: \"No more images to load.\",\n                position: \"topRight\",\n            });\n            loadMoreBtn.style.display = \"none\";\n            return;\n        } else if (currentPage * 15 >= data.totalHits) {\n            loadMoreBtn.style.display = \"none\";\n                iziToast.info({\n                title: \"End of Results\",\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\",\n                });\n                return;\n        }\n\n        const markup = reflectionPictures(data.hits);\n        gallery.insertAdjacentHTML(\"beforeend\", markup);\n\n        const image = document.querySelector(\".gallery-item\");\n        const imageHeight = image.getBoundingClientRect().height;\n\n        window.scrollBy({\n            left: 0,\n            top: imageHeight,\n            behavior: \"smooth\"\n        })\n        \n        lightbox.refresh();\n    } catch (error) {\n        iziToast.error({\n            title: \"Error\",\n            message: \"Something went wrong. Please try again later.\",\n            position: \"topRight\",\n        });\n    }\n\n}\n\n\n\n\n\n\n\n"],"names":["getPictures","query","page","perPage","BASE_URL","KEY","params","axios","error","reflectionPictures","pictures","webformatURL","largeImageURL","tags","likes","views","comments","downloads","formSearch","gallery","loadMoreBtn","lightbox","SimpleLightbox","currentPage","currentQuery","handleSearch","handleLoadMore","event","iziToast","data","markup","imageHeight"],"mappings":"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"}