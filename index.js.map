{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport axios from \"axios\";\n\n\nexport default async function getPictures(query, page = 1, perPage = 15) {\n    const BASE_URL = \"https://pixabay.com/api/\";\n    const KEY = '47394920-a4032b33a38ab12c89a369f6a';\n    \n    const params = new URLSearchParams({\n        key: KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\",\n        page,\n        per_page: perPage,\n    });\n\n    try {\n        const response = await axios(BASE_URL, { params });\n        return response.data;\n    } catch (error) {\n        iziToast.error({\n            title: \"Error\",\n            message: \"Failed to fetch images. Please try again later.\",\n            position: \"topRight\",\n        });\n        throw error;\n    } \n        \n};\n\n","export default reflectionPictures;\n\n\nfunction reflectionPictures(pictures) {\n    return pictures.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n        <div class=\"gallery-card\">\n            <a class=\"gallery-item\" href=\"${largeImageURL}\">\n            <div class=\"all-gallery\">\n            <img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\">\n            <div class=\"discription\">\n            <p class=\"discr-text\">Likes <span>${likes}</span></p>\n            <p class=\"discr-text\">Views <span>${views}</span></p>\n            <p class=\"discr-text\">Comments <span>${comments}</span></p>\n            <p class=\"discr-text\">Downloads <span>${downloads}</span></p>\n            </div>\n            </div>\n            </a>\n        </div>\n    \n    `).join(\"\");\n}\n\n","\"use strict\"\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport \"./js/pixabay-api.js\";\nimport \"./js/render-functions.js\";\nimport getPictures from \"./js/pixabay-api.js\";\nimport reflectionPictures from \"./js/render-functions.js\";\n\n\n\nconst formSearch = document.querySelector(\".search-form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loadMoreBtn = document.querySelector(\".load-btn-js\");\nconst loader = document.querySelector(\".loader\");\n\nloader.style.display = \"none\";\n\n\nlet lightbox = new SimpleLightbox(\".gallery-item\", {\n    captions: true,\n    captionSelector: \"img\",\n    captionType: \"attr\",\n    captionsData: \"alt\",\n    captionDelay: 250,\n});\n\nlet currentPage = 1;\nlet currentQuery = \"\";\n\nloadMoreBtn.style.display = \"none\";\n\n\nformSearch.addEventListener(\"submit\", handleSearch);\nloadMoreBtn.addEventListener(\"click\", handleLoadMore);\n\nasync function handleSearch(event) {\n    event.preventDefault();\n    \n\n    gallery.innerHTML = \"\";\n\n    currentQuery = event.target.elements.query.value.trim();\n    currentPage = 1;\n\n    if (currentQuery === \"\") {\n        iziToast.error({\n            title: \"No Results\",\n            message: \"Sorry, there are no images matching your search query. Please try again!\",\n            position: \"topRight\",\n        });\n        loadMoreBtn.style.display = \"none\";\n        return;\n    }\n\n    loader.style.display = \"block\";\n\n    try {\n        const data = await getPictures(currentQuery, currentPage);\n\n            if (data.hits.length === 0) {\n                iziToast.info({\n                    title: \"No Results\",\n                    message: \"Sorry, there are no images matching your search query. Please try again!\",\n                    position: \"topRight\",\n                });\n                loadMoreBtn.style.display = \"none\";\n                return\n            } else if (currentPage * 15 >= data.totalHits) {\n                loadMoreBtn.style.display = \"none\";\n                iziToast.info({\n                title: \"End of Results\",\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\",\n                });\n                return;\n        }\n            \n            const markup = reflectionPictures(data.hits);\n            gallery.innerHTML = markup;\n\n        lightbox.refresh();\n        loadMoreBtn.style.display = \"block\";\n        } catch (error) {\n            iziToast.error({\n                title: \"Error\",\n                message: \"Something went wrong. Please try again later\",\n                position: \"topRight\"\n            });\n        } finally {\n        loader.style.display = \"none\";\n        event.target.reset();\n        };\n}\n\nasync function handleLoadMore() {\n    currentPage += 1;\n\n    loader.style.display = \"block\";\n\n    try {\n        const data = await getPictures(currentQuery, currentPage);\n\n        if (data.hits.length === 0) {\n            iziToast.info({\n                title: \"End of Results\",\n                message: \"No more images to load.\",\n                position: \"topRight\",\n            });\n            loadMoreBtn.style.display = \"none\";\n            return;\n        } else if (currentPage * 15 >= data.totalHits) {\n            loadMoreBtn.style.display = \"none\";\n                iziToast.info({\n                title: \"End of Results\",\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\",\n                });\n                return;\n        }\n\n        const markup = reflectionPictures(data.hits);\n        gallery.insertAdjacentHTML(\"beforeend\", markup);\n\n        let getCard = () => document.querySelector('.gallery-item').getBoundingClientRect();\n        \n        window.scrollBy({\n            top: getCard().height * 2,\n            left: 0,\n            behavior: 'smooth',\n         });\n\n        lightbox.refresh();\n    } catch (error) {\n        iziToast.error({\n            title: \"Error\",\n            message: \"Something went wrong. Please try again later.\",\n            position: \"topRight\",\n        });\n    } finally {\n        loader.style.display = \"none\";\n    }\n\n}\n\n\n\n\n\n\n\n"],"names":["getPictures","query","page","perPage","BASE_URL","KEY","params","axios","error","reflectionPictures","pictures","webformatURL","largeImageURL","tags","likes","views","comments","downloads","formSearch","gallery","loadMoreBtn","loader","lightbox","SimpleLightbox","currentPage","currentQuery","handleSearch","handleLoadMore","event","iziToast","data","markup","getCard"],"mappings":"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"}